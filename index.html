<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Prompts para ENAMED 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estiliza√ß√£o da barra de rolagem */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="none" stroke="%236b7280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 7l3-3 3 3m0 6l-3 3-3-3"/></svg>');
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }
        
        /* Estilos para o Guia Interativo */
        .guide-highlight {
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.6);
            border-radius: 0.5rem;
            position: relative;
            z-index: 1001;
            transition: all 0.3s ease-in-out;
            background-color: rgba(59, 130, 246, 0.05);
        }
        #guide-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
        #guide-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1002; /* Aumentado para ficar acima de outros elementos */
            transition: top 0.3s ease-in-out, left 0.3s ease-in-out;
        }

    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Guia Interativo Modal -->
    <div id="guide-overlay" class="hidden"></div>
    <div id="guide-modal" class="hidden bg-white p-6 rounded-lg shadow-2xl w-11/12 max-w-md fade-in">
        <h3 id="guide-title" class="text-xl font-bold text-gray-800 mb-3">Guia Interativo</h3>
        <p id="guide-text" class="text-gray-600 mb-5">Texto do guia aqui.</p>
        <div class="flex justify-between items-center">
            <button id="guide-close" class="text-sm text-gray-500 hover:text-gray-800">Sair</button>
            <div>
                <button id="guide-prev" class="px-4 py-2 text-sm bg-gray-200 rounded-md hover:bg-gray-300 mr-2">Anterior</button>
                <button id="guide-next" class="px-4 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700">Pr√≥ximo</button>
            </div>
        </div>
    </div>


    <div class="container mx-auto p-4 sm:p-6 md:p-8 max-w-5xl">
        <header class="text-center mb-8">
            <img src="logo.png" alt="Logo da Institui√ß√£o" class="mx-auto h-20 w-auto mb-4" onerror="this.src='https://placehold.co/300x80/007bff/ffffff?text=Sua+Logo+Aqui&font=inter'">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-700">Gerador de Prompts para ENAMED 2025</h1>
            <p class="text-gray-600 mt-2 text-md sm:text-lg">Crie prompts personalizados para gerar quest√µes de simulados com base nos documentos oficiais.</p>
        </header>

        <main class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg relative">
             <button id="start-guide" class="absolute top-4 right-4 bg-blue-100 text-blue-700 font-semibold py-2 px-4 rounded-full hover:bg-blue-200 transition-colors text-sm flex items-center">
                <span class="mr-2">‚ùì</span> Como Usar (Guia)
            </button>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 mt-10">
                <!-- Coluna de Seletores 1 -->
                <div class="space-y-6" id="guide-col-1">
                    <div id="guide-el-area-primaria">
                        <label for="area-formacao-primaria" class="block text-sm font-medium text-gray-700 mb-1">ü©∫ √Årea de Forma√ß√£o Principal (Art. 3¬∫)</label>
                        <select id="area-formacao-primaria" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                        </select>
                    </div>
                     <div id="guide-el-area-secundaria">
                        <label for="area-formacao-secundaria" class="block text-sm font-medium text-gray-700 mb-1">‚ûï √Årea de Forma√ß√£o Secund√°ria (Opcional)</label>
                        <select id="area-formacao-secundaria" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                        </select>
                    </div>
                    <div id="guide-el-perfil">
                        <label for="perfil" class="block text-sm font-medium text-gray-700 mb-1">üë§ Perfil do Avaliado (Art. 5¬∫)</label>
                        <select id="perfil" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                        </select>
                    </div>
                     <div id="guide-el-competencias">
                        <label for="competencias" class="block text-sm font-medium text-gray-700 mb-1">üéØ Compet√™ncias (Art. 6¬∫)</label>
                        <select id="competencias" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                        </select>
                    </div>
                </div>
                <!-- Coluna de Seletores 2 -->
                <div class="space-y-6" id="guide-col-2">
                   <div id="guide-el-dc">
                        <label for="dc1" class="block text-sm font-medium text-gray-700 mb-1">üìö Dom√≠nio de Conte√∫do 1, 2 e 3 (Art. 8¬∫)</label>
                        <select id="dc1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition mb-4">
                        </select>
                        <select id="dc2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition mb-4">
                        </select>
                        <select id="dc3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                        </select>
                    </div>
                </div>
            </div>
             <div class="grid grid-cols-1 md:grid-cols-3 gap-x-8 gap-y-6 mt-6" id="guide-col-3">
                <div id="guide-el-quantidade">
                    <label for="quantidade-questoes" class="block text-sm font-medium text-gray-700 mb-1">üî¢ Quantidade de Quest√µes</label>
                    <input type="number" id="quantidade-questoes" value="1" min="1" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                </div>
                <div id="guide-el-bloom">
                    <label for="taxonomia-bloom" class="block text-sm font-medium text-gray-700 mb-1">üß† Taxonomia de Bloom</label>
                    <select id="taxonomia-bloom" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                    </select>
                </div>
                <div id="guide-el-dificuldade">
                    <label for="nivel-dificuldade" class="block text-sm font-medium text-gray-700 mb-1">üî• N√≠vel de Dificuldade</label>
                    <select id="nivel-dificuldade" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                    </select>
                </div>
            </div>
             <div class="mt-6" id="guide-el-tipo">
                <label for="tipo-questao" class="block text-sm font-medium text-gray-700 mb-1">üìù Tipo de Quest√£o</label>
                <select id="tipo-questao" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                </select>
            </div>

            <!-- Se√ß√£o de Acessibilidade -->
            <div class="mt-6" id="guide-el-acessibilidade">
                <label class="block text-sm font-medium text-gray-700 mb-2">‚ôø Acessibilidade para Neurodivergentes</label>
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                    <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition cursor-pointer">
                        <input type="checkbox" id="acess-lang-direta" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" checked>
                        <span class="ml-3 text-sm text-gray-700">Linguagem direta</span>
                    </label>
                    <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition cursor-pointer">
                        <input type="checkbox" id="acess-sem-negativa" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" checked>
                        <span class="ml-3 text-sm text-gray-700">Evitar duplas negativas</span>
                    </label>
                    <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition cursor-pointer">
                        <input type="checkbox" id="acess-negrito" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" checked>
                        <span class="ml-3 text-sm text-gray-700">Destacar em negrito</span>
                    </label>
                    <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition cursor-pointer">
                        <input type="checkbox" id="acess-paragrafos" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" checked>
                        <span class="ml-3 text-sm text-gray-700">Par√°grafos curtos</span>
                    </label>
                     <label class="flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition cursor-pointer">
                        <input type="checkbox" id="acess-espacamento" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" checked>
                        <span class="ml-3 text-sm text-gray-700">Bom espa√ßamento</span>
                    </label>
                </div>
            </div>

            <div class="mt-8 text-center" id="guide-el-gerar">
                <button id="gerar-prompt" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-transform transform hover:scale-105 inline-flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />
                    </svg>
                    Gerar Prompt
                </button>
            </div>

            <div id="resultado-prompt" class="mt-8 hidden fade-in">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">‚ú® Prompt Gerado:</h2>
                <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 relative">
                    <textarea id="prompt-texto" readonly class="w-full h-64 bg-transparent border-none resize-none focus:outline-none text-gray-700"></textarea>
                    <button id="copiar-prompt" title="Copiar Prompt" class="absolute top-3 right-3 bg-gray-200 text-gray-700 p-2 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"></path>
                            <path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"></path>
                        </svg>
                    </button>
                </div>
                <div id="copy-feedback" class="text-green-600 text-sm mt-2 text-center hidden">Copiado! ‚úÖ</div>
            </div>
        </main>

        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>üìÑ &copy; 2025 - Ferramenta de Apoio para Elabora√ß√£o de Quest√µes ENAMED. Desenvolvido com base nos documentos oficiais.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- DADOS EXTRA√çDOS DOS DOCUMENTOS OFICIAIS E PEDAG√ìGICOS ---

            const tiposDeQuestao = ["Resposta √önica", "Resposta M√∫ltipla"];
            const taxonomiaBloom = ["Lembrar", "Compreender", "Aplicar", "Analisar", "Avaliar", "Criar"];
            const niveisDificuldade = ["F√°cil", "M√©dio", "Dif√≠cil"];
            const areasDeFormacao = ["Cl√≠nica M√©dica", "Cirurgia Geral", "Ginecologia e Obstetr√≠cia", "Pediatria", "Medicina da Fam√≠lia e Comunidade", "Sa√∫de Mental", "Sa√∫de Coletiva"];
            const perfis = [
                "I. Comprometido com o respeito √† singularidade de cada pessoa e grupo social...",
                "II. Defensor da cidadania e da dignidade humana...",
                "III. Cr√≠tico e reflexivo em rela√ß√£o ao seu fazer profissional...",
                "IV. Orientado pelos princ√≠pios da √©tica e da bio√©tica...",
                "V. Embasado em uma forma√ß√£o geral, atuando na preven√ß√£o, promo√ß√£o, recupera√ß√£o e reabilita√ß√£o...",
                "VI. Comprometido com a sua forma√ß√£o continuada...",
                "VII. Orientado para uma cl√≠nica centrada na pessoa..."
            ];
            const competencias = [
                "I. Respeitar a singularidade de cada pessoa e grupo social...",
                "II. Formular hip√≥teses diagn√≥sticas plaus√≠veis...",
                "III. Solicitar e interpretar exames complementares...",
                "IV. Elaborar, pactuar e acompanhar o plano terap√™utico individual...",
                "V. Reconhecer, diagnosticar e tratar as urg√™ncias e as emerg√™ncias...",
                "VI. Indicar e realizar procedimentos m√©dicos...",
                "VII. Identificar as necessidades de sa√∫de de grupos de pessoas ou de comunidades...",
                "VIII. Planejar, implementar, gerenciar e avaliar planos e projetos de interven√ß√£o coletiva...",
                "IX. Identificar e promover os princ√≠pios, as diretrizes e as pol√≠ticas dos sistemas de sa√∫de...",
                "X. Comunicar-se, por meio de linguagem adequada...",
                "XI. Aplicar os princ√≠pios do trabalho em equipe...",
                "XII. Registrar no prontu√°rio, de forma clara e objetiva...",
                "XIII. Respeitar as normas √©ticas e deontol√≥gicas do exerc√≠cio profissional...",
                "XIV. Ter atitude autorreflexiva...",
                "XV. Utilizar as novas tecnologias da informa√ß√£o e comunica√ß√£o..."
            ];
            const dominiosDeConteudo = [
                "I. Bases moleculares e celulares dos processos normais e alterados...",
                "II. Processos fisiol√≥gicos dos seres humanos nas diferentes fases do ciclo de vida.",
                "III. Determinantes sociais, culturais, comportamentais, psicol√≥gicos e ecol√≥gicos...",
                "IV. √âtica, bio√©tica, rela√ß√£o m√©dico-paciente e seguran√ßa de dados.",
                "V. Direitos humanos e inclus√£o...",
                "VI. Semiologia m√©dica (anamnese e exame f√≠sico)...",
                "VII. Habilidades de comunica√ß√£o com o paciente...",
                "VIII. Registro e documenta√ß√£o m√©dica.",
                "IX. Proped√™utica e diagn√≥stico dos problemas de sa√∫de...",
                "X. Terap√™utica dos problemas de sa√∫de...",
                "XI. Progn√≥stico e preven√ß√£o...",
                "XII. Reabilita√ß√£o f√≠sica e psicossocial...",
                "XIII. Promo√ß√£o e educa√ß√£o em sa√∫de.",
                "XIV. Pol√≠ticas de sa√∫de e Sistema √önico de Sa√∫de (SUS).",
                "XV. Planejamento e gest√£o de servi√ßos de sa√∫de.",
                "XVI. Epidemiologia, indicadores de sa√∫de e sistemas de informa√ß√£o.",
                "XVII. Vigil√¢ncia em sa√∫de e controle de doen√ßas e agravos...",
                "XVIII. Sa√∫de ambiental e ocupacional.",
                "XIX. Lideran√ßa colaborativa, decis√£o compartilhada e trabalho em equipe...",
                "XX. Metodologia cient√≠fica, medicina baseada em evid√™ncias...",
                "XXI. Uso de tecnologias de comunica√ß√£o e informa√ß√£o..."
            ];

            const regrasRespostaUnica = `
* As alternativas devem ter paralelismo sint√°tico e sem√¢ntico (ex: todas come√ßando com verbo).
* As alternativas devem ser dispostas em ordem l√≥gica (ex: crescente, alfab√©tica).
* Evitar a repeti√ß√£o de palavras entre o enunciado e as alternativas.
* Evitar o uso de palavras de conota√ß√£o negativa (ex: "n√£o") ou termos absolutos (ex: "sempre", "nunca", "todos", "somente").
* Os distratores (respostas incorretas) devem ser plaus√≠veis e retratar erros comuns.`;

            const regrasRespostaMultipla = `
* As afirmativas (I, II, III...) devem ser independentes umas das outras e do enunciado.
* Cada afirmativa deve ser uma frase √∫nica, com estrutura sint√°tica completa.
* Deve haver pelo menos uma afirmativa correta e uma incorreta no conjunto.
* Evitar o uso de palavras de conota√ß√£o negativa (ex: "n√£o") ou termos absolutos (ex: "sempre", "nunca", "todos", "somente").
* Na chave de respostas (alternativas A, B, C, D, E), cada afirmativa (I, II, III...) deve aparecer um n√∫mero equilibrado de vezes.`;

            // --- L√ìGICA DA APLICA√á√ÉO ---

            function populateSelect(selectId, options) {
                const select = document.getElementById(selectId);
                if (!select) return;
                select.innerHTML = '';
                options.forEach(optionText => {
                    const option = document.createElement('option');
                    option.value = optionText;
                    option.textContent = optionText.length > 90 ? optionText.substring(0, 90) + '...' : optionText;
                    select.appendChild(option);
                });
            }
            
            const secondaryAreas = ["Nenhuma", ...areasDeFormacao];

            populateSelect('tipo-questao', tiposDeQuestao);
            populateSelect('taxonomia-bloom', taxonomiaBloom);
            populateSelect('nivel-dificuldade', niveisDificuldade);
            populateSelect('area-formacao-primaria', areasDeFormacao);
            populateSelect('area-formacao-secundaria', secondaryAreas);
            populateSelect('perfil', perfis);
            populateSelect('competencias', competencias);
            populateSelect('dc1', dominiosDeConteudo);
            populateSelect('dc2', dominiosDeConteudo);
            populateSelect('dc3', dominiosDeConteudo);

            const gerarBtn = document.getElementById('gerar-prompt');
            const copiarBtn = document.getElementById('copiar-prompt');
            const resultadoDiv = document.getElementById('resultado-prompt');
            const promptTextarea = document.getElementById('prompt-texto');
            const copyFeedback = document.getElementById('copy-feedback');

            gerarBtn.addEventListener('click', function() {
                const quantidade = document.getElementById('quantidade-questoes').value;
                const taxonomia = document.getElementById('taxonomia-bloom').value;
                const dificuldade = document.getElementById('nivel-dificuldade').value;
                const tipoQuestao = document.getElementById('tipo-questao').value;
                const areaFormacaoPrimaria = document.getElementById('area-formacao-primaria').value;
                const areaFormacaoSecundaria = document.getElementById('area-formacao-secundaria').value;
                const perfil = document.getElementById('perfil').value;
                const competencias = document.getElementById('competencias').value;
                const dc1 = document.getElementById('dc1').value;
                const dc2 = document.getElementById('dc2').value;
                const dc3 = document.getElementById('dc3').value;

                let regrasEspecificas = '';
                if (tipoQuestao === 'Resposta √önica') {
                    regrasEspecificas = regrasRespostaUnica;
                } else if (tipoQuestao === 'Resposta M√∫ltipla') {
                    regrasEspecificas = regrasRespostaMultipla;
                }
                
                let areaParametro = `* **√Årea de Forma√ß√£o M√©dica Principal (Art. 3¬∫):** ${areaFormacaoPrimaria}`;
                if (areaFormacaoSecundaria && areaFormacaoSecundaria !== "Nenhuma") {
                    areaParametro += `\n* **√Årea de Forma√ß√£o M√©dica Secund√°ria (Art. 3¬∫):** ${areaFormacaoSecundaria}\n\n**Integra√ß√£o de √Åreas:** O cen√°rio cl√≠nico e a pergunta devem ABRANGER E INTEGRAR conhecimentos de AMBAS as √°reas de forma√ß√£o selecionadas (Principal e Secund√°ria).`;
                }
                
                const diretrizesAcessibilidade = [];
                if (document.getElementById('acess-lang-direta').checked) diretrizesAcessibilidade.push('Use linguagem direta e clara');
                if (document.getElementById('acess-sem-negativa').checked) diretrizesAcessibilidade.push('evite duplas negativas');
                if (document.getElementById('acess-negrito').checked) diretrizesAcessibilidade.push('destaque em **negrito** os termos e informa√ß√µes mais importantes no enunciado');
                if (document.getElementById('acess-paragrafos').checked) diretrizesAcessibilidade.push('utilize par√°grafos curtos');
                if (document.getElementById('acess-espacamento').checked) diretrizesAcessibilidade.push('garanta um bom espa√ßamento entre as linhas e as alternativas');
                
                let acessibilidadePrompt = '';
                if (diretrizesAcessibilidade.length > 0) {
                    acessibilidadePrompt = `* **Formata√ß√£o para Neurodivergentes:** Elabore a quest√£o com aten√ß√£o √† acessibilidade cognitiva: ${diretrizesAcessibilidade.join(', ')}. Facilite a leitura para reduzir a carga cognitiva.`
                }

                const promptGerado = `
**Instru√ß√£o para IA Generativa - Elabora√ß√£o de Quest√£o para ENAMED 2025**

**Objetivo:** Elaborar ${quantidade} quest√£o(√µes) para um simulado do Exame Nacional de Avalia√ß√£o de M√©dicos (ENAMED) 2025.

**Diretrizes:** A(s) quest√£o(√µes) deve(m) seguir rigorosamente as especifica√ß√µes da Portaria N¬∫ 478/2025 e das Diretrizes Curriculares Nacionais do Curso de Medicina.

**Estrutura da Quest√£o:**
1.  **Tipo de Quest√£o:** ${tipoQuestao}.
2.  **Contexto Cl√≠nico:** Crie um cen√°rio cl√≠nico detalhado e realista, preferencialmente em um ambiente de Aten√ß√£o Prim√°ria ou Secund√°ria do SUS.
3.  **Enunciado:** Apresente o caso cl√≠nico e formule uma pergunta clara e objetiva.

**Regras Espec√≠ficas para ${tipoQuestao}:**
${regrasEspecificas.trim()}

**Diretrizes de Cogni√ß√£o e Acessibilidade:**
* **N√≠vel Cognitivo (Bloom):** A quest√£o deve ser do n√≠vel "${taxonomia}".
* **N√≠vel de Dificuldade:** ${dificuldade}.
${acessibilidadePrompt}

**Par√¢metros a serem Avaliados:**
${areaParametro}
* **Perfil do Avaliado (Art. 5¬∫):** A quest√£o deve ser elaborada para que o candidato demonstre o seguinte perfil: "${perfil}"
* **Compet√™ncias Essenciais (Art. 6¬∫):** A resolu√ß√£o da quest√£o deve exigir a aplica√ß√£o da seguinte compet√™ncia: "${competencias}"
* **Dom√≠nio de Conte√∫dos (Art. 8¬∫):** A quest√£o deve abordar, de forma integrada, os seguintes dom√≠nios de conte√∫do:
    1.  ${dc1}
    2.  ${dc2}
    3.  ${dc3}

**Formato da Resposta:**
* Apresente 5 alternativas (A, B, C, D, E).
* Apenas uma alternativa deve ser a correta.
* As alternativas incorretas (distratores) devem ser plaus√≠veis, mas conceitualmente erradas.
* **Equil√≠brio Visual:** Todas as alternativas (correta e incorretas) devem ter uma extens√£o (n√∫mero de palavras/linhas) e complexidade estrutural semelhantes, evitando que a resposta correta se destaque visualmente.
* Ao final, forne√ßa o gabarito e uma justificativa detalhada para a alternativa correta, explicando o racioc√≠nio cl√≠nico e te√≥rico esperado, e por que as outras alternativas est√£o incorretas.
`;
                promptTextarea.value = promptGerado.trim();
                resultadoDiv.classList.remove('hidden');
            });
            
            copiarBtn.addEventListener('click', function() {
                promptTextarea.select();
                try {
                    document.execCommand('copy');
                    copyFeedback.classList.remove('hidden');
                    setTimeout(() => { copyFeedback.classList.add('hidden'); }, 2000);
                } catch (err) { console.error('Falha ao copiar o texto: ', err); }
                window.getSelection().removeAllRanges();
            });

            // --- L√ìGICA DO GUIA INTERATIVO ---
            const guideOverlay = document.getElementById('guide-overlay');
            const guideModal = document.getElementById('guide-modal');
            const guideTitle = document.getElementById('guide-title');
            const guideText = document.getElementById('guide-text');
            const startGuideBtn = document.getElementById('start-guide');
            const closeGuideBtn = document.getElementById('guide-close');
            const prevGuideBtn = document.getElementById('guide-prev');
            const nextGuideBtn = document.getElementById('guide-next');

            const guideSteps = [
                { id: 'guide-el-area-primaria', title: 'Passo 1: √Årea de Forma√ß√£o Principal', text: 'Aqui voc√™ define o tema central da quest√£o. Por exemplo, escolher "Pediatria" far√° com que a IA crie um caso cl√≠nico sobre uma crian√ßa. Esta √© a base para todo o cen√°rio.' },
                { id: 'guide-el-area-secundaria', title: 'Passo 2: √Årea de Forma√ß√£o Secund√°ria', text: 'Esta sele√ß√£o √© opcional. Se escolhida, a IA ser√° instru√≠da a criar uma quest√£o interdisciplinar, que conecte a √°rea principal com esta secund√°ria. Exemplo: "Cl√≠nica M√©dica" e "Sa√∫de Mental" para um caso de depress√£o em um paciente diab√©tico.' },
                { id: 'guide-el-perfil', title: 'Passo 3: Perfil do Avaliado', text: 'Selecione qual caracter√≠stica do perfil profissional m√©dico (Art. 5¬∫ da Portaria) a quest√£o deve avaliar. Ex: escolher "Comunica√ß√£o" levar√° a IA a criar um cen√°rio onde a habilidade de comunica√ß√£o do m√©dico √© testada.' },
                { id: 'guide-el-competencias', title: 'Passo 4: Compet√™ncias', text: 'Define a habilidade espec√≠fica (Art. 6¬∫) que o aluno precisa demonstrar para resolver a quest√£o. Ex: "Formular hip√≥teses diagn√≥sticas" direciona a IA a focar no racioc√≠nio diagn√≥stico.' },
                { id: 'guide-el-dc', title: 'Passo 5: Dom√≠nios de Conte√∫do', text: 'Escolha at√© tr√™s conhecimentos te√≥ricos (Art. 8¬∫) que devem ser integrados na quest√£o. Isso garante a profundidade e a abrang√™ncia do item, conectando a base te√≥rica √† pr√°tica cl√≠nica.' },
                { id: 'guide-el-bloom', title: 'Passo 6: Taxonomia de Bloom', text: 'Define o n√≠vel de complexidade cognitiva da quest√£o. "Lembrar" gera quest√µes sobre fatos, enquanto "Criar" exige que o aluno desenvolva uma solu√ß√£o original para um problema.' },
                { id: 'guide-el-dificuldade', title: 'Passo 7: N√≠vel de Dificuldade', text: 'Ajusta a complexidade geral da quest√£o (F√°cil, M√©dio, Dif√≠cil), influenciando a sutileza do caso cl√≠nico e a semelhan√ßa entre as alternativas corretas e incorretas.' },
                { id: 'guide-el-tipo', title: 'Passo 8: Tipo de Quest√£o', text: 'Escolha o formato da quest√£o. "Resposta √önica" tem apenas uma alternativa correta. "Resposta M√∫ltipla" apresenta v√°rias afirmativas para julgar como certas ou erradas.' },
                { id: 'guide-el-acessibilidade', title: 'Passo 9: Acessibilidade', text: 'Selecione as diretrizes de acessibilidade para alunos neurodivergentes. Cada item selecionado ser√° adicionado como uma instru√ß√£o espec√≠fica no prompt, moldando a quest√£o para ser mais clara e acess√≠vel.' },
                { id: 'guide-el-gerar', title: 'Passo 10: Gerar Prompt', text: 'Ap√≥s configurar todos os par√¢metros, clique aqui. Todas as suas escolhas ser√£o compiladas em um texto de instru√ß√£o detalhado (o prompt) para a IA.' },
            ];
            
            let currentStep = -1;
            let highlightedElement = null;

            function showGuideStep(index) {
                if (highlightedElement) {
                    highlightedElement.classList.remove('guide-highlight');
                }
                
                if (index < 0 || index >= guideSteps.length) {
                    closeGuide();
                    return;
                }

                currentStep = index;
                const step = guideSteps[index];
                
                guideTitle.textContent = step.title;
                guideText.textContent = step.text;
                
                highlightedElement = document.getElementById(step.id);
                if (highlightedElement) {
                    highlightedElement.classList.add('guide-highlight');
                    highlightedElement.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    setTimeout(() => {
                        const elRect = highlightedElement.getBoundingClientRect();
                        const modal = document.getElementById('guide-modal');
                        const modalRect = modal.getBoundingClientRect();

                        let top = elRect.top + (elRect.height / 2) - (modalRect.height / 2);
                        if (top < 16) top = 16;
                        if (top + modalRect.height > window.innerHeight - 16) {
                            top = window.innerHeight - modalRect.height - 16;
                        }
                        
                        let left;
                        if (elRect.right + modalRect.width + 20 < window.innerWidth) {
                            left = elRect.right + 10;
                        } else if (elRect.left - modalRect.width - 20 > 0) {
                            left = elRect.left - modalRect.width - 10;
                        } else {
                            left = (window.innerWidth / 2) - (modalRect.width / 2);
                        }

                        modal.style.top = `${top}px`;
                        modal.style.left = `${left}px`;
                        modal.style.transform = 'none';

                    }, 350);
                }

                prevGuideBtn.style.visibility = index === 0 ? 'hidden' : 'visible';
                nextGuideBtn.textContent = index === guideSteps.length - 1 ? 'Finalizar' : 'Pr√≥ximo';
            }

            function startGuide() {
                guideOverlay.classList.remove('hidden');
                guideModal.classList.remove('hidden');
                showGuideStep(0);
            }

            function closeGuide() {
                guideOverlay.classList.add('hidden');
                guideModal.classList.add('hidden');
                if (highlightedElement) {
                    highlightedElement.classList.remove('guide-highlight');
                }
                currentStep = -1;
                highlightedElement = null;
                
                const modal = document.getElementById('guide-modal');
                modal.style.top = '50%';
                modal.style.left = '50%';
                modal.style.transform = 'translate(-50%, -50%)';
            }

            startGuideBtn.addEventListener('click', startGuide);
            closeGuideBtn.addEventListener('click', closeGuide);
            guideOverlay.addEventListener('click', closeGuide);
            prevGuideBtn.addEventListener('click', () => showGuideStep(currentStep - 1));
            nextGuideBtn.addEventListener('click', () => showGuideStep(currentStep + 1));

        });
    </script>
</body>
</html>

